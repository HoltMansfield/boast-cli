var {{ collectionNamePlural }}Api = rek('{{ collectionNamePlural }}-api');


var addRoutes = function(app) {

  app.router.get('/api/{{ collectionNamePlural }}/:id', function(req, res, next) {
    {{ collectionNamePlural }}Api.get(req.params.id)
    .then(function(data) {
      res.json(data);
    })
    .catch(function(err) {
      return next(err);
    });
  });

  app.router.put('/api/{{ collectionNamePlural }}/:id', function(req, res, next) {
    {{ collectionNamePlural }}Api.put(req.params.id, req.body)
      .then(function(data) {
        res.json(data);
      })
      .catch(function(err) {
        return next(err);
      });
  });

  app.router.post('/api/{{ collectionNamePlural }}/', function(req, res, next) {
    {{ collectionNamePlural }}Api.post(req.body)
      .then(function(data) {
        res.json(data);
      })
      .catch(function(err) {
        return next(err);
      });
  });

  app.router.post('/api/{{ collectionNamePlural }}/query', function(req, res, next) {
    {{ collectionNamePlural }}Api.query(req.body)
      .then(function(data) {
        res.json(data);
      })
      .catch(function(err) {
        return next(err);
      });
  });

  app.router.delete('/api/{{ collectionNamePlural }}/:id', function(req, res, next) {
    {{ collectionNamePlural }}Api.delete(req.params.id, req.body)
      .then(function(data) {
        res.json(data);
      })
      .catch(function(err) {
        return next(err);
      });
  });

  return app;
};

module.exports = addRoutes;
